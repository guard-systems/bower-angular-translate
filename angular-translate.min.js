/*!
 * angular-translate - v2.1.0 - 2014-04-02
 * http://github.com/PascalPrecht/angular-translate
 * Copyright (c) 2014 ; Licensed MIT
 */
angular.module("pascalprecht.translate",["ng"]).run(["$translate",function(t){var e=t.storageKey(),n=t.storage()
n?n.get(e)?t.use(n.get(e)):angular.isString(t.preferredLanguage())?t.use(t.preferredLanguage()):n.set(e,t.use()):angular.isString(t.preferredLanguage())&&t.use(t.preferredLanguage())}]),angular.module("pascalprecht.translate").provider("$translate",["$STORAGE_KEY",function(t){var e,n,r,a,i,o,s,u,l,c,f,g,h,d,v={},p=[],$=t,m=[],L=!1,S="translate-cloak",y=!1,b=function(){var t=window.navigator
return(t.language||t.browserLanguage||t.systemLanguage||t.userLanguage||"").split("-").join("_")},w=function(t){for(var e=[],r=angular.lowercase(t),a=0,i=p.length;a<i;a++)e.push(angular.lowercase(p[a]))
if(e.indexOf(r)>-1)return r
if(n){var o
for(var s in n)if(n.hasOwnProperty(s)&&angular.lowercase(s)===angular.lowercase(t)&&(o=n[s],e.indexOf(angular.lowercase(o))>-1))return o}var u=t.split("_")
return u.length>1&&e.indexOf(angular.lowercase(u[0]))>-1?u[0]:void 0},I=function(t,e){if(!t&&!e)return v
if(t&&!e){if(angular.isString(t))return v[t]}else angular.isObject(v[t])||(v[t]={}),angular.extend(v[t],E(e))
return this}
this.translations=I,this.cloakClassName=function(t){return t?(S=t,this):S}
var E=function(t,e,n,r){var a,i,o,s
e||(e=[]),n||(n={})
for(a in t)t.hasOwnProperty(a)&&(s=t[a],angular.isObject(s)?E(s,e.concat(a),n,a):(i=e.length?e.join(".")+"."+a:a,e.length&&a===r&&(o=""+e.join("."),n[o]="@:"+i),n[i]=s))
return n}
this.addInterpolation=function(t){return m.push(t),this},this.useMessageFormatInterpolation=function(){return this.useInterpolation("$translateMessageFormatInterpolation")},this.useInterpolation=function(t){return c=t,this},this.useSanitizeValueStrategy=function(t){return L=t,this},this.preferredLanguage=function(t){return t?(e=t,this):e},this.translationNotFoundIndicator=function(t){return this.translationNotFoundIndicatorLeft(t),this.translationNotFoundIndicatorRight(t),this},this.translationNotFoundIndicatorLeft=function(t){return t?(h=t,this):h},this.translationNotFoundIndicatorRight=function(t){return t?(d=t,this):d},this.fallbackLanguage=function(t){return k(t),this}
var k=function(t){return t?(angular.isString(t)?(a=!0,r=[t]):angular.isArray(t)&&(a=!1,r=t),angular.isString(e)&&r.push(e),this):a?r[0]:r}
this.use=function(t){if(t){if(!v[t]&&!f)throw new Error("$translateProvider couldn't find translationTable for langKey: '"+t+"'")
return i=t,this}return i}
var C=function(t){if(!t)return u?u+$:$
$=t}
this.storageKey=C,this.useUrlLoader=function(t){return this.useLoader("$translateUrlLoader",{url:t})},this.useStaticFilesLoader=function(t){return this.useLoader("$translateStaticFilesLoader",t)},this.useLoader=function(t,e){return f=t,g=e||{},this},this.useLocalStorage=function(){return this.useStorage("$translateLocalStorage")},this.useCookieStorage=function(){return this.useStorage("$translateCookieStorage")},this.useStorage=function(t){return s=t,this},this.storagePrefix=function(t){return t?(u=t,this):t},this.useMissingTranslationHandlerLog=function(){return this.useMissingTranslationHandler("$translateMissingTranslationHandlerLog")},this.useMissingTranslationHandler=function(t){return l=t,this},this.usePostCompiling=function(t){return y=!!t,this},this.determinePreferredLanguage=function(t){var n=t&&angular.isFunction(t)?t():b()
if(!p.length)return e=n,this
e=w(n)},this.registerAvailableLanguageKeys=function(t,e){return t?(p=t,e&&(n=e),this):p},this.$get=["$log","$injector","$rootScope","$q",function(t,n,u,p){var b,w,j,P=n.get(c||"$translateDefaultInterpolation"),O=!1,x={},F={},T=function(t,n,a){if(angular.isArray(t)){return function(t){for(var e={},r=[],i=0,o=t.length;i<o;i++)r.push(function(t){var r=p.defer(),i=function(n){e[t]=n,r.resolve([t,n])}
return T(t,n,a).then(i,i),r.promise}(t[i]))
return p.all(r).then(function(){return e})}(t)}var o=p.defer()
t=t.trim()
var u=function(){var t=e?F[e]:F[i]
if(w=0,s&&!t){var n=b.get($)
if(t=F[n],r&&r.length){var a=N(r,n)
w=a>-1?a+=1:0,r.push(e)}}return t}()
return u?u.then(function(){G(t,n,a).then(o.resolve,o.reject)},o.reject):G(t,n,a).then(o.resolve,o.reject),o.promise},N=function(t,e){for(var n=0,r=t.length;n<r;n++)if(t[n]===e)return n
return-1},A=function(t){return h&&(t=[h,t].join(" ")),d&&(t=[t,d].join(" ")),t},V=function(t){i=t,u.$emit("$translateChangeSuccess"),s&&b.set(T.storageKey(),i),P.setLocale(i),angular.forEach(x,function(t,e){x[e].setLocale(i)}),u.$emit("$translateChangeEnd")},_=function(t){var e=p.defer()
return u.$emit("$translateLoadingStart"),O=!0,n.get(f)(angular.extend(g,{key:t})).then(function(n){var r={}
u.$emit("$translateLoadingSuccess"),angular.isArray(n)?angular.forEach(n,function(t){angular.extend(r,E(t))}):angular.extend(r,E(n)),O=!1,e.resolve({key:t||n._headers&&n._headers["content-language"]?n._headers["content-language"].replace("-",""):void 0,table:r}),u.$emit("$translateLoadingEnd")},function(t){u.$emit("$translateLoadingError"),e.reject(t),u.$emit("$translateLoadingEnd")}),e.promise}
if(s&&(b=n.get(s),!b.get||!b.set))throw new Error("Couldn't use storage '"+s+"', missing get() or set() method!")
angular.isFunction(P.useSanitizeValueStrategy)&&P.useSanitizeValueStrategy(L),m.length&&angular.forEach(m,function(t){var r=n.get(t)
r.setLocale(e||i),angular.isFunction(r.useSanitizeValueStrategy)&&r.useSanitizeValueStrategy(L),x[r.getInterpolationIdentifier()]=r})
var K=function(t){var e=p.defer()
return v.hasOwnProperty(t)?(e.resolve(v[t]),e.promise):(F[t].then(function(t){I(t.key,t.table),e.resolve(t.table)},e.reject),e.promise)},R=function(t,e,n,r){var a=p.defer()
return K(t).then(function(o){o.hasOwnProperty(e)?(r.setLocale(t),a.resolve(r.interpolate(o[e],n)),r.setLocale(i)):a.reject()},a.reject),a.promise},M=function(t,e,n,r){var a,o=v[t]
return o.hasOwnProperty(e)&&(r.setLocale(t),a=r.interpolate(o[e],n),r.setLocale(i)),a},z=function(t,e,n,a){var i=p.defer()
if(t<r.length){var o=r[t]
R(o,e,n,a).then(function(t){i.resolve(t)},function(){var r=z(t+1,e,n,a)
i.resolve(r)})}else i.resolve(e)
return i.promise},H=function(t,e,n,a){var i
if(t<r.length){var o=r[t]
i=M(o,e,n,a),i||(i=H(t+1,e,n,a))}return i},q=function(t,e,n){return z(j>0?j:w,t,e,n)},D=function(t,e,n){return H(j>0?j:w,t,e,n)},G=function(t,e,a){var o=p.defer(),s=i?v[i]:v,u=a?x[a]:P
if(s&&s.hasOwnProperty(t)){var c=s[t]
"@:"===c.substr(0,2)?T(c.substr(2),e,a).then(o.resolve,o.reject):o.resolve(u.interpolate(c,e))}else l&&!O&&n.get(l)(t,i),i&&r&&r.length?q(t,e,u).then(function(t){o.resolve(t)},function(t){o.reject(A(t))}):o.reject(A(t))
return o.promise},Y=function(t,e,a){var o,s=i?v[i]:v,u=a?x[a]:P
if(s&&s.hasOwnProperty(t)){var c=s[t]
o="@:"===c.substr(0,2)?Y(c.substr(2),e,a):u.interpolate(c,e)}else l&&!O&&n.get(l)(t,i),i&&r&&r.length?(w=0,o=D(t,e,u)):o=A(t)
return o}
if(T.preferredLanguage=function(){return e},T.cloakClassName=function(){return S},T.fallbackLanguage=function(t){if(void 0!==t&&null!==t){if(k(t),f&&r&&r.length)for(var e=0,n=r.length;e<n;e++)F[r[e]]||(F[r[e]]=_(r[e]))
T.use()}return a?r[0]:r},T.useFallbackLanguage=function(t){if(void 0!==t&&null!==t)if(t){var e=N(r,t)
e>-1&&(j=e)}else j=0},T.proposedLanguage=function(){return o},T.storage=function(){return b},T.use=function(t){var e=p.defer()
return u.$emit("$translateChangeStart"),!v[t]&&f?(o=t,F[t]=_(t).then(function(n){I(n.key,n.table),e.resolve(n.key),o===t&&(V(n.key),o=void 0)},function(t){o=void 0,u.$emit("$translateChangeError"),e.reject(t),u.$emit("$translateChangeEnd")})):(e.resolve(t),V(t)),e.promise},T.storageKey=function(){return C()},T.isPostCompilingEnabled=function(){return y},T.refresh=function(t){function e(){a.resolve(),u.$emit("$translateRefreshEnd")}function n(){a.reject(),u.$emit("$translateRefreshEnd")}if(!f)throw new Error("Couldn't refresh translation table, no loader registered!")
var a=p.defer()
if(u.$emit("$translateRefreshStart"),t)v[t]?_(t).then(function(n){I(n.key,n.table),t===i&&V(i),e()},n):n()
else{var o=[]
if(r&&r.length)for(var s=0,l=r.length;s<l;s++)o.push(_(r[s]))
i&&o.push(_(i)),p.all(o).then(function(t){angular.forEach(t,function(t){v[t.key]&&delete v[t.key],I(t.key,t.table)}),i&&V(i),e()})}return a.promise},T.instant=function(t,a,o){if(angular.isArray(t)){for(var s={},u=0,c=t.length;u<c;u++)s[t[u]]=T.instant(t[u],a,o)
return s}if(void 0===t||""===t)return t
t=t.trim()
var f,g=[]
e&&g.push(e),i&&g.push(i),r&&r.length&&(g=g.concat(r))
for(var h=0,d=g.length;h<d;h++){var p=g[h]
if(v[p]&&void 0!==v[p][t]&&(f=Y(t,a,o)),void 0!==f)break}return f||""===f||(f=t,l&&!O&&n.get(l)(t,i)),f},f&&(angular.equals(v,{})&&T.use(),r&&r.length))for(var U=0,B=r.length;U<B;U++)F[r[U]]=_(r[U])
return T}]}]),angular.module("pascalprecht.translate").factory("$translateDefaultInterpolation",["$interpolate",function(t){var e,n={},r=null,a={escaped:function(t){var e={}
for(var n in t)t.hasOwnProperty(n)&&(e[n]=angular.element("<div></div>").text(t[n]).html())
return e}},i=function(t){return angular.isFunction(a[r])?a[r](t):t}
return n.setLocale=function(t){e=t},n.getInterpolationIdentifier=function(){return"default"},n.useSanitizeValueStrategy=function(t){return r=t,this},n.interpolate=function(e,n){return r&&(n=i(n)),t(e)(n)},n}]),angular.module("pascalprecht.translate").constant("$STORAGE_KEY","NG_TRANSLATE_LANG_KEY"),angular.module("pascalprecht.translate").directive("translate",["$translate","$q","$interpolate","$compile","$parse","$rootScope",function(t,e,n,r,a,i){return{restrict:"AE",scope:!0,compile:function(e,o){var s=o.translateValues?o.translateValues:void 0,u=o.translateInterpolation?o.translateInterpolation:void 0,l=e[0].outerHTML.match(/translate-value-+/i)
return function(e,c,f){if(e.interpolateParams={},f.$observe("translate",function(t){angular.equals(t,"")||!angular.isDefined(t)?e.translationId=n(c.text().replace(/^\s+|\s+$/g,""))(e.$parent):e.translationId=t}),f.$observe("translateDefault",function(t){e.defaultText=t}),s&&f.$observe("translateValues",function(t){t&&e.$parent.$watch(function(){angular.extend(e.interpolateParams,a(t)(e.$parent))})}),l){for(var g in f)f.hasOwnProperty(g)&&"translateValue"===g.substr(0,14)&&"translateValues"!==g&&function(t){f.$observe(t,function(n){e.interpolateParams[angular.lowercase(t.substr(14,1))+t.substr(15)]=n})}(g)}var h=function(e,n,a){a||void 0===n.defaultText||(e=n.defaultText),c.html(e)
var i=t.isPostCompilingEnabled(),s=void 0!==o.translateCompile,u=s&&"false"!==o.translateCompile;(i&&!s||u)&&r(c.contents())(n)},d=function(){return s||l?function(){var n=function(){e.translationId&&e.interpolateParams&&t(e.translationId,e.interpolateParams,u).then(function(t){h(t,e,!0)},function(t){h(t,e,!1)})}
e.$watch("interpolateParams",n,!0),e.$watch("translationId",n)}:function(){var n=e.$watch("translationId",function(r){e.translationId&&r&&t(r,{},u).then(function(t){h(t,e,!0),n()},function(t){h(t,e,!1),n()})},!0)}}(),v=i.$on("$translateChangeSuccess",d)
d(),e.$on("$destroy",v)}}}}]),angular.module("pascalprecht.translate").directive("translateCloak",["$rootScope","$translate",function(t,e){return{compile:function(n){t.$on("$translateLoadingSuccess",function(){n.removeClass(e.cloakClassName())}),n.addClass(e.cloakClassName())}}}]),angular.module("pascalprecht.translate").filter("translate",["$parse","$translate",function(t,e){return function(n,r,a){return angular.isObject(r)||(r=t(r)()),e.instant(n,r,a)}}])
